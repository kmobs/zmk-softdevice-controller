rsource "src/sdc/Kconfig"

# ============================================================================
# Connection Subrating
# ============================================================================

if BT_SUBRATING

config ZMK_BLE_SUBRATE_IDLE_MIN
	int "Idle subrate factor minimum"
	default 1
	range 1 500
	help
	  Minimum subrate factor when idle. Higher values save power.

config ZMK_BLE_SUBRATE_IDLE_MAX
	int "Idle subrate factor maximum"
	default 15
	range 1 500
	help
	  Maximum subrate factor when idle. Higher values save more power
	  but increase latency.

	  Constraints:
	  - Must be >= ZMK_BLE_SUBRATE_IDLE_MIN
	  - IDLE_MAX * (MAX_LATENCY + 1) must be <= 500
	  - Must be > ZMK_BLE_SUBRATE_IDLE_CN

config ZMK_BLE_SUBRATE_IDLE_CN
	int "Idle continuation number"
	default 2
	range 0 499
	help
	  Number of connection events to remain active after data is sent
	  when idle.

	  Constraint: Must be < ZMK_BLE_SUBRATE_IDLE_MAX

config ZMK_BLE_SUBRATE_MAX_LATENCY
	int "Maximum peripheral latency"
	default 10
	range 0 499
	help
	  Maximum peripheral latency in subrated connection events.

	  Constraint: IDLE_MAX * (MAX_LATENCY + 1) must be <= 500

config ZMK_BLE_SUBRATE_TIMEOUT
	int "Supervision timeout (10ms units)"
	default 400
	range 10 3200
	help
	  Supervision timeout in 10ms units (400 = 4 seconds).

	  Constraint: Must be > 2 * conn_interval_ms * IDLE_MAX * (MAX_LATENCY + 1) / 10
	  With default 7.5ms interval: minimum ~248 (2.48s)

if ZMK_SPLIT_ROLE_CENTRAL

config ZMK_BLE_SUBRATE_ACTIVE_MIN
	int "Active subrate factor minimum"
	default 1
	range 1 500
	help
	  Minimum subrate factor when active (typing). Should be low for
	  fast response.

config ZMK_BLE_SUBRATE_ACTIVE_MAX
	int "Active subrate factor maximum"
	default 2
	range 1 500
	help
	  Maximum subrate factor when active. Should be low for fast
	  response.

	  Constraints:
	  - Must be >= ZMK_BLE_SUBRATE_ACTIVE_MIN
	  - Must be > ZMK_BLE_SUBRATE_ACTIVE_CN

config ZMK_BLE_SUBRATE_ACTIVE_CN
	int "Active continuation number"
	default 1
	range 0 499
	help
	  Number of connection events to remain active after data is sent
	  when active.

	  Constraint: Must be < ZMK_BLE_SUBRATE_ACTIVE_MAX

endif # ZMK_SPLIT_ROLE_CENTRAL

endif # BT_SUBRATING
